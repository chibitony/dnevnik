<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–π –î–Ω–µ–≤–Ω–∏–∫ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏—è</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js CDN –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot, collection, query, orderBy, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Firebase (–±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –≤ window)
        window.firebaseApp = null;
        window.db = null;
        window.auth = null;
        window.userId = null;
        window.isAuthReady = false;
        window.dailyLogs = []; // –ì–ª–æ–±–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∏–≤ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö

        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
        async function initializeFirebase() {
            try {
                // –í–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ Firestore
                setLogLevel('error'); // –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –ª—É—á—à–µ 'error'

                const app = initializeApp(firebaseConfig);
                window.firebaseApp = app;
                window.db = getFirestore(app);
                window.auth = getAuth(app);
                
                let authReadyPromise = new Promise(resolve => {
                    const unsubscribe = onAuthStateChanged(window.auth, async (user) => {
                        unsubscribe(); // –û—Ç–ø–∏—Å–∫–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—ã–∑–æ–≤–∞
                        if (user) {
                            window.userId = user.uid;
                        } else {
                            try {
                                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                                    const userCredential = await signInWithCustomToken(window.auth, __initial_auth_token);
                                    window.userId = userCredential.user.uid;
                                } else {
                                    const userCredential = await signInAnonymously(window.auth);
                                    window.userId = userCredential.user.uid;
                                }
                            } catch (error) {
                                console.error("–û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:", error);
                                // Fallback to an unauthenticated/random ID if auth fails
                                window.userId = crypto.randomUUID();
                            }
                        }
                        console.log("UserID:", window.userId);
                        window.isAuthReady = true;
                        resolve();
                    });
                });

                await authReadyPromise;
                
                // –ü–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Å–ª—É—à–∞—Ç–µ–ª—å –¥–∞–Ω–Ω—ã—Ö
                setupDataListener();

            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Firebase:", error);
            }
        }

        function setupDataListener() {
            if (!window.isAuthReady || !window.userId || !window.db) return;

            const logsCollectionRef = collection(window.db, `artifacts/${appId}/users/${window.userId}/daily_logs`);
            
            // –í–Ω–∏–º–∞–Ω–∏–µ: order by –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –±—É–¥–µ—Ç –≤ JS –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏.
            const q = query(logsCollectionRef); 

            onSnapshot(q, (snapshot) => {
                const logs = [];
                snapshot.forEach((doc) => {
                    logs.push(doc.data());
                });
                // –°–æ—Ä—Ç–∏—Ä—É–µ–º –≤ –ø–∞–º—è—Ç–∏ –ø–æ –¥–∞—Ç–µ
                window.dailyLogs = logs.sort((a, b) => (a.date < b.date ? -1 : 1));
                console.log("–î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã:", window.dailyLogs.length, "–∑–∞–ø–∏—Å–µ–π.");
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UI –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
                updateUI();
            }, (error) => {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö Firestore:", error);
            });
        }

        window.saveDailyLog = async (data) => {
            if (!window.isAuthReady || !window.userId || !window.db) {
                console.error("Firebase –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω.");
                showModal("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è", "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –≥–æ—Ç–æ–≤–æ –∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.");
                return;
            }

            const docRef = doc(window.db, `artifacts/${appId}/users/${window.userId}/daily_logs`, data.date);
            try {
                await setDoc(docRef, data, { merge: true });
                showModal("–£—Å–ø–µ—Ö", "–í–∞—à–∞ –∑–∞–ø–∏—Å—å –¥–Ω—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!");
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö:", error);
                showModal("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è", `–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ: ${error.message}`);
            }
        };

        window.onload = initializeFirebase;
    </script>

    <!-- Custom Pastel Styling -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        
        :root {
            /* Pastel Palette */
            --p-blue: #B3E5FC; /* –û—Ç–ª–∏—á–Ω–æ */
            --p-green: #C8E6C9; /* –•–æ—Ä–æ—à–æ / –ù–∏–∑–∫–∏–π –°—Ç—Ä–µ—Å—Å */
            --p-yellow: #FFF9C4; /* –ù–æ—Ä–º / –°—Ä–µ–¥–Ω–∏–π –°—Ç—Ä–µ—Å—Å */
            --p-orange: #FFCCBC; /* –ù–µ –æ—á–µ–Ω—å */
            --p-red: #FFCDD2; /* –ü–ª–æ—Ö–æ / –í—ã—Å–æ–∫–∏–π –°—Ç—Ä–µ—Å—Å */
            --p-bg: #F8F8FF; /* –û–±—â–∏–π —Ñ–æ–Ω */
            --p-text: #6A1B9A; /* –§–∏–æ–ª–µ—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç */
            --p-accent: #E1BEE7; /* –°–≤–µ—Ç–ª–æ-—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π –∞–∫—Ü–µ–Ω—Ç */
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--p-bg);
            color: #333;
        }

        .tab-button {
            transition: all 0.2s;
            border-radius: 9999px; /* –ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–π */
        }
        
        .tab-button.active {
            background-color: var(--p-accent);
            color: var(--p-text);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –∫—Ä—É–∂–æ—á–∫–æ–≤ –æ—Ü–µ–Ω–∫–∏ */
        .rating-option {
            transition: all 0.15s;
            border: 2px solid var(--p-accent);
            cursor: pointer;
        }
        .rating-option:hover {
            transform: scale(1.05);
        }
        .rating-option.selected {
            background-color: var(--p-accent);
            color: white;
            transform: scale(1.1);
            border-color: var(--p-text);
        }

        /* –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–∑—É–Ω–∫–∞ */
        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            background: var(--p-accent);
            border-radius: 4px;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--p-text);
            cursor: grab;
            margin-top: -8px; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –ø–∞–ª—å—Ü–∞ */
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        /* –ö–∞–ª–µ–Ω–¥–∞—Ä—å */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }
        .day-cell {
            padding: 8px 4px;
            border-radius: 8px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .bg-p-blue { background-color: var(--p-blue); }
        .bg-p-green { background-color: var(--p-green); }
        .bg-p-yellow { background-color: var(--p-yellow); }
        .bg-p-orange { background-color: var(--p-orange); }
        .bg-p-red { background-color: var(--p-red); }
    </style>
</head>
<body class="min-h-screen p-4 md:p-8">
    <div id="app" class="max-w-md mx-auto bg-white shadow-xl rounded-2xl overflow-hidden">
        
        <!-- Header –∏ –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <header class="p-4 bg-white sticky top-0 z-10">
            <h1 class="text-2xl font-bold text-center" style="color: var(--p-text);">üíñ –î–Ω–µ–≤–Ω–∏–∫ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏—è üíñ</h1>
            <div id="nav-tabs" class="flex justify-around p-2 mt-4 bg-gray-100 rounded-full shadow-inner">
                <button data-view="input" class="tab-button active flex-1 py-2 text-sm font-semibold text-center" style="color: var(--p-text);">–ó–∞–ø–∏—Å—å</button>
                <button data-view="calendar" class="tab-button flex-1 py-2 text-sm font-semibold text-center" style="color: var(--p-text);">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</button>
                <button data-view="charts" class="tab-button flex-1 py-2 text-sm font-semibold text-center" style="color: var(--p-text);">–ì—Ä–∞—Ñ–∏–∫–∏</button>
            </div>
        </header>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤–∫–ª–∞–¥–æ–∫ -->
        <main class="p-4">
            <!-- 1. –í–∫–ª–∞–¥–∫–∞ "–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ó–∞–ø–∏—Å—å" (Input) -->
            <div id="view-input" class="view-content space-y-6">
                <div class="p-4 rounded-xl shadow-md" style="background-color: var(--p-accent); color: white;">
                    <label for="date-input" class="block text-sm font-medium mb-2 text-white">–î–∞—Ç–∞:</label>
                    <input type="date" id="date-input" class="w-full p-2 rounded-lg text-gray-800 focus:ring-2 focus:ring-white" style="border: 1px solid var(--p-accent);" />
                </div>

                <!-- –û—Ü–µ–Ω–∫–∞ –î–Ω—è (–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ) -->
                <section class="bg-gray-50 p-4 rounded-xl shadow-md">
                    <h2 class="text-lg font-semibold mb-3" style="color: var(--p-text);">–û—Ü–µ–Ω–∫–∞ –¥–Ω—è (–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ)</h2>
                    <div class="flex justify-between items-center text-center">
                        <div class="flex flex-col items-center">
                            <button data-mood="1" class="rating-option w-10 h-10 flex items-center justify-center rounded-full text-lg hover:bg-p-red bg-p-red/50">1</button>
                            <span class="text-xs mt-1 text-gray-500">–ü–ª–æ—Ö–æ</span>
                        </div>
                        <div class="flex flex-col items-center">
                            <button data-mood="2" class="rating-option w-10 h-10 flex items-center justify-center rounded-full text-lg hover:bg-p-orange bg-p-orange/50">2</button>
                            <span class="text-xs mt-1 text-gray-500">–ù–µ –æ—á–µ–Ω—å</span>
                        </div>
                        <div class="flex flex-col items-center">
                            <button data-mood="3" class="rating-option w-10 h-10 flex items-center justify-center rounded-full text-lg hover:bg-p-yellow bg-p-yellow/50">3</button>
                            <span class="text-xs mt-1 text-gray-500">–ù–æ—Ä–º</span>
                        </div>
                        <div class="flex flex-col items-center">
                            <button data-mood="4" class="rating-option w-10 h-10 flex items-center justify-center rounded-full text-lg hover:bg-p-green bg-p-green/50">4</button>
                            <span class="text-xs mt-1 text-gray-500">–•–æ—Ä–æ—à–æ</span>
                        </div>
                        <div class="flex flex-col items-center">
                            <button data-mood="5" class="rating-option w-10 h-10 flex items-center justify-center rounded-full text-lg hover:bg-p-blue bg-p-blue/50">5</button>
                            <span class="text-xs mt-1 text-gray-500">–û—Ç–ª–∏—á–Ω–æ</span>
                        </div>
                    </div>
                </section>

                <!-- –û—Ü–µ–Ω–∫–∞ –°—Ç—Ä–µ—Å—Å–∞ –∏ –≠–Ω–µ—Ä–≥–∏–∏ -->
                <section class="bg-gray-50 p-4 rounded-xl shadow-md space-y-4">
                    <h2 class="text-lg font-semibold" style="color: var(--p-text);">–û—Ü–µ–Ω–∫–∞ –°—Ç—Ä–µ—Å—Å–∞ –∏ –≠–Ω–µ—Ä–≥–∏–∏ (1-10)</h2>

                    <!-- –°—Ç—Ä–µ—Å—Å -->
                    <div>
                        <label for="stress-slider" class="flex justify-between font-medium mb-2" style="color: var(--p-text);">
                            –£—Ä–æ–≤–µ–Ω—å –°—Ç—Ä–µ—Å—Å–∞: <span id="stress-value" class="font-bold">5</span>
                        </label>
                        <input type="range" id="stress-slider" min="1" max="10" value="5" />
                        <div class="flex justify-between text-xs mt-1 text-gray-500"><span>–ù–∏–∑–∫–∏–π</span><span>–í—ã—Å–æ–∫–∏–π</span></div>
                    </div>

                    <!-- –≠–Ω–µ—Ä–≥–∏—è -->
                    <div>
                        <label for="energy-slider" class="flex justify-between font-medium mb-2" style="color: var(--p-text);">
                            –£—Ä–æ–≤–µ–Ω—å –≠–Ω–µ—Ä–≥–∏–∏: <span id="energy-value" class="font-bold">5</span>
                        </label>
                        <input type="range" id="energy-slider" min="1" max="10" value="5" />
                        <div class="flex justify-between text-xs mt-1 text-gray-500"><span>–ù–∏–∑–∫–∏–π</span><span>–í—ã—Å–æ–∫–∏–π</span></div>
                    </div>
                </section>

                <!-- –ó–∞–º–µ—Ç–∫–∏ -->
                <section class="bg-gray-50 p-4 rounded-xl shadow-md">
                    <h2 class="text-lg font-semibold mb-3" style="color: var(--p-text);">–ó–∞–º–µ—Ç–∫–∏</h2>
                    <textarea id="note-input" rows="4" class="w-full p-3 rounded-lg border-2 border-gray-200 focus:border-purple-300 focus:ring-0" placeholder="–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ —Å–µ–≥–æ–¥–Ω—è?"></textarea>
                </section>

                <button id="save-button" onclick="handleSave()" class="w-full py-3 text-lg font-bold rounded-xl text-white shadow-lg transform active:scale-95 transition duration-150" style="background-color: var(--p-text);">
                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ó–∞–ø–∏—Å—å
                </button>
            </div>

            <!-- 2. –í–∫–ª–∞–¥–∫–∞ "–ö–∞–ª–µ–Ω–¥–∞—Ä—å" -->
            <div id="view-calendar" class="view-content hidden space-y-4">
                <h2 class="text-xl font-bold text-center" style="color: var(--p-text);">–ö–∞–ª–µ–Ω–¥–∞—Ä—å –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏—è</h2>
                
                <div class="flex justify-center items-center space-x-4">
                    <button onclick="changeMonth(-1)" class="p-2 rounded-full hover:bg-gray-200" style="color: var(--p-text);">&lt;</button>
                    <span id="current-month-year" class="text-lg font-semibold" style="color: var(--p-text);"></span>
                    <button onclick="changeMonth(1)" class="p-2 rounded-full hover:bg-gray-200" style="color: var(--p-text);">&gt;</button>
                </div>
                
                <div class="calendar-grid p-3 rounded-xl shadow-md bg-white">
                    <div class="text-xs font-bold text-gray-500">–ü–Ω</div>
                    <div class="text-xs font-bold text-gray-500">–í—Ç</div>
                    <div class="text-xs font-bold text-gray-500">–°—Ä</div>
                    <div class="text-xs font-bold text-gray-500">–ß—Ç</div>
                    <div class="text-xs font-bold text-gray-500">–ü—Ç</div>
                    <div class="text-xs font-bold text-gray-500" style="color: #F44336;">–°–±</div>
                    <div class="text-xs font-bold text-gray-500" style="color: #F44336;">–í—Å</div>
                    <div id="calendar-days" class="col-span-7 calendar-grid">
                        <!-- –î–Ω–∏ –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã JavaScript -->
                    </div>
                </div>

                <div class="p-3 rounded-xl shadow-md bg-white">
                    <h3 class="font-semibold mb-2" style="color: var(--p-text);">–õ–µ–≥–µ–Ω–¥–∞ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏—è:</h3>
                    <div class="flex flex-wrap gap-2">
                        <span class="flex items-center text-sm"><span class="w-4 h-4 rounded-full mr-1 bg-p-blue"></span> –û—Ç–ª–∏—á–Ω–æ (5)</span>
                        <span class="flex items-center text-sm"><span class="w-4 h-4 rounded-full mr-1 bg-p-green"></span> –•–æ—Ä–æ—à–æ (4)</span>
                        <span class="flex items-center text-sm"><span class="w-4 h-4 rounded-full mr-1 bg-p-yellow"></span> –ù–æ—Ä–º (3)</span>
                        <span class="flex items-center text-sm"><span class="w-4 h-4 rounded-full mr-1 bg-p-orange"></span> –ù–µ –æ—á–µ–Ω—å (2)</span>
                        <span class="flex items-center text-sm"><span class="w-4 h-4 rounded-full mr-1 bg-p-red"></span> –ü–ª–æ—Ö–æ (1)</span>
                    </div>
                </div>
            </div>

            <!-- 3. –í–∫–ª–∞–¥–∫–∞ "–ì—Ä–∞—Ñ–∏–∫–∏" -->
            <div id="view-charts" class="view-content hidden space-y-6">
                <h2 class="text-xl font-bold text-center" style="color: var(--p-text);">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h2>
                
                <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –ù–µ–¥–µ–ª—è/–ú–µ—Å—è—Ü -->
                <div class="flex justify-center p-1 bg-gray-100 rounded-full shadow-inner">
                    <button data-period="week" class="chart-period-button active flex-1 py-2 text-sm font-semibold rounded-full" style="color: var(--p-text); background-color: var(--p-accent);">–ù–µ–¥–µ–ª—è</button>
                    <button data-period="month" class="chart-period-button flex-1 py-2 text-sm font-semibold rounded-full" style="color: var(--p-text);">–ú–µ—Å—è—Ü</button>
                </div>

                <!-- –ì—Ä–∞—Ñ–∏–∫ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏—è -->
                <section class="bg-white p-4 rounded-xl shadow-lg">
                    <h3 class="text-lg font-semibold mb-3" style="color: var(--p-text);">–ì—Ä–∞—Ñ–∏–∫ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏—è</h3>
                    <canvas id="moodChart" height="200"></canvas>
                </section>

                <!-- –ì—Ä–∞—Ñ–∏–∫ –°—Ç—Ä–µ—Å—Å–∞ -->
                <section class="bg-white p-4 rounded-xl shadow-lg">
                    <h3 class="text-lg font-semibold mb-3" style="color: var(--p-text);">–ì—Ä–∞—Ñ–∏–∫ –°—Ç—Ä–µ—Å—Å–∞</h3>
                    <canvas id="stressChart" height="200"></canvas>
                </section>

            </div>
        </main>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π -->
        <div id="modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden items-center justify-center z-50">
            <div class="bg-white p-6 rounded-xl shadow-2xl max-w-xs w-full text-center" style="border: 2px solid var(--p-text);">
                <h3 id="modal-title" class="text-xl font-bold mb-3" style="color: var(--p-text);"></h3>
                <p id="modal-message" class="mb-4 text-gray-700"></p>
                <button onclick="closeModal()" class="w-full py-2 rounded-lg text-white font-semibold" style="background-color: var(--p-text);">OK</button>
            </div>
        </div>

    </div>

    <script>
        // --- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ UI ---
        const moodOptions = document.querySelectorAll('.rating-option[data-mood]');
        const stressSlider = document.getElementById('stress-slider');
        const energySlider = document.getElementById('energy-slider');
        const stressValueSpan = document.getElementById('stress-value');
        const energyValueSpan = document.getElementById('energy-value');
        const dateInput = document.getElementById('date-input');
        
        let currentMood = 3; // –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();
        let currentChartPeriod = 'week';
        let moodChartInstance = null;
        let stressChartInstance = null;

        // --- –¶–≤–µ—Ç–æ–≤–∞—è –ü–∞–ª–∏—Ç—Ä–∞ –¥–ª—è JS/Chart.js ---
        const MOOD_COLORS = {
            5: { bg: '#B3E5FC', border: '#03A9F4', label: '–û—Ç–ª–∏—á–Ω–æ' }, // Pastel Blue
            4: { bg: '#C8E6C9', border: '#4CAF50', label: '–•–æ—Ä–æ—à–æ' }, // Pastel Green
            3: { bg: '#FFF9C4', border: '#FFEB3B', label: '–ù–æ—Ä–º' }, // Pastel Yellow
            2: { bg: '#FFCCBC', border: '#FF5722', label: '–ù–µ –æ—á–µ–Ω—å' }, // Pastel Orange
            1: { bg: '#FFCDD2', border: '#F44336', label: '–ü–ª–æ—Ö–æ' }, // Pastel Red
        };

        // --- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ ---

        function showModal(title, message) {
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-message').textContent = message;
            document.getElementById('modal').classList.remove('hidden');
            document.getElementById('modal').classList.add('flex');
        }

        function closeModal() {
            document.getElementById('modal').classList.add('hidden');
            document.getElementById('modal').classList.remove('flex');
        }
        
        function getTodayDateString() {
            return new Date().toISOString().split('T')[0];
        }

        function getMoodColor(mood) {
            return MOOD_COLORS[mood] ? MOOD_COLORS[mood].bg : '#E0E0E0';
        }

        function getStressColor(stress) {
            // 1 (–Ω–∏–∑–∫–∏–π) -> –ó–µ–ª–µ–Ω—ã–π, 10 (–≤—ã—Å–æ–∫–∏–π) -> –ö—Ä–∞—Å–Ω—ã–π
            if (stress <= 3) return MOOD_COLORS[4].bg; // Greenish
            if (stress <= 7) return MOOD_COLORS[3].bg; // Yellowish
            return MOOD_COLORS[1].bg; // Reddish
        }
        
        // --- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤–≤–æ–¥–∞ ---
        
        function updateMoodSelection(selectedMood) {
            currentMood = selectedMood;
            moodOptions.forEach(btn => {
                btn.classList.remove('selected');
                if (parseInt(btn.dataset.mood) === selectedMood) {
                    btn.classList.add('selected');
                }
            });
        }

        function setupInputListeners() {
            // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ–≥–æ–¥–Ω—è—à–Ω—é—é –¥–∞—Ç—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            dateInput.value = getTodayDateString();

            // Mood options listener
            moodOptions.forEach(btn => {
                btn.addEventListener('click', () => {
                    const mood = parseInt(btn.dataset.mood);
                    updateMoodSelection(mood);
                });
            });

            // Slider listeners
            stressSlider.addEventListener('input', () => {
                stressValueSpan.textContent = stressSlider.value;
            });
            energySlider.addEventListener('input', () => {
                energyValueSpan.textContent = energySlider.value;
            });
            
            // –í—ã–±–∏—Ä–∞–µ–º mood 3 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            updateMoodSelection(currentMood);
        }
        
        // --- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö ---

        window.handleSave = async () => {
            const date = dateInput.value;
            const mood = currentMood;
            const stress = parseInt(stressSlider.value);
            const energy = parseInt(energySlider.value);
            const note = document.getElementById('note-input').value.trim();

            if (!date || !mood) {
                showModal("–û—à–∏–±–∫–∞ –≤–≤–æ–¥–∞", "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –∏ –æ—Ü–µ–Ω–∫—É –¥–Ω—è.");
                return;
            }

            const dataToSave = {
                date: date,
                mood: mood,
                stress: stress,
                energy: energy,
                note: note,
                timestamp: Date.now()
            };

            await window.saveDailyLog(dataToSave);
            
            // –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (–∫—Ä–æ–º–µ –¥–∞—Ç—ã)
            document.getElementById('note-input').value = '';
            stressSlider.value = 5; stressValueSpan.textContent = 5;
            energySlider.value = 5; energyValueSpan.textContent = 5;
            updateMoodSelection(3);
        }

        // --- –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI ---

        function switchView(viewId) {
            document.querySelectorAll('.view-content').forEach(view => {
                view.classList.add('hidden');
            });
            document.getElementById(`view-${viewId}`).classList.remove('hidden');

            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.tab-button[data-view="${viewId}"]`).classList.add('active');

            // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏
            if (viewId === 'calendar') {
                renderCalendar();
            } else if (viewId === 'charts') {
                updateCharts();
            }
        }

        function updateUI() {
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é –≤–∫–ª–∞–¥–∫—É (–ö–∞–ª–µ–Ω–¥–∞—Ä—å –∏–ª–∏ –ì—Ä–∞—Ñ–∏–∫–∏)
            const activeTab = document.querySelector('.tab-button.active').dataset.view;
            if (activeTab === 'calendar') {
                renderCalendar();
            } else if (activeTab === 'charts') {
                updateCharts();
            }
        }

        // --- –õ–æ–≥–∏–∫–∞ –ö–∞–ª–µ–Ω–¥–∞—Ä—è ---

        function renderCalendar() {
            document.getElementById('current-month-year').textContent = new Date(currentYear, currentMonth).toLocaleDateString('ru-RU', { month: 'long', year: 'numeric' });
            
            const calendarDaysContainer = document.getElementById('calendar-days');
            calendarDaysContainer.innerHTML = '';
            
            const firstDayOfMonth = new Date(currentYear, currentMonth, 1);
            const lastDayOfMonth = new Date(currentYear, currentMonth + 1, 0);
            
            // –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–Ω—è –Ω–µ–¥–µ–ª–∏: –í—Å=0, –ü–Ω=1...
            let startDay = firstDayOfMonth.getDay(); 
            // –ü—Ä–µ–≤—Ä–∞—â–∞–µ–º –í—Å (0) –≤ 7, —á—Ç–æ–±—ã –ü–Ω –±—ã–ª 1 (—Å–æ–≥–ª–∞—Å–Ω–æ ru –ª–æ–∫–∞–ª–∏)
            if (startDay === 0) startDay = 7;
            
            // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—É—Å—Ç—ã—Ö —è—á–µ–µ–∫ –≤ –Ω–∞—á–∞–ª–µ (–ü–Ω=1, –ø–æ—ç—Ç–æ–º—É -1)
            const leadingBlanks = startDay - 1;

            // –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏ –¥–ª—è –Ω–∞—á–∞–ª–∞ –Ω–µ–¥–µ–ª–∏
            for (let i = 0; i < leadingBlanks; i++) {
                const blankCell = document.createElement('div');
                blankCell.className = 'day-cell';
                calendarDaysContainer.appendChild(blankCell);
            }

            // –î–æ–±–∞–≤–ª—è–µ–º –¥–Ω–∏ –º–µ—Å—è—Ü–∞
            for (let day = 1; day <= lastDayOfMonth.getDate(); day++) {
                const dateString = new Date(currentYear, currentMonth, day).toISOString().split('T')[0];
                const log = window.dailyLogs.find(l => l.date === dateString);
                const dayCell = document.createElement('div');
                dayCell.className = 'day-cell text-gray-800 font-medium relative';
                dayCell.textContent = day;

                if (log) {
                    const moodColor = getMoodColor(log.mood);
                    dayCell.style.backgroundColor = moodColor;
                    dayCell.classList.add('shadow-inner', 'font-bold', 'text-gray-800');
                    dayCell.setAttribute('title', `–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ: ${MOOD_COLORS[log.mood].label} (–ó–∞–º–µ—Ç–∫–∞: ${log.note || '–ù–µ—Ç'})`);
                } else {
                    dayCell.style.backgroundColor = 'var(--p-bg)';
                }
                calendarDaysContainer.appendChild(dayCell);
            }
        }

        window.changeMonth = (offset) => {
            currentMonth += offset;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            } else if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            renderCalendar();
        }


        // --- –õ–æ–≥–∏–∫–∞ –ì—Ä–∞—Ñ–∏–∫–æ–≤ (Chart.js) ---

        function filterLogsByPeriod(period) {
            const today = new Date(getTodayDateString());
            let startDate;

            if (period === 'week') {
                // –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ (0) -> -6 –¥–Ω–µ–π, –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ (1) -> 0 –¥–Ω–µ–π, —á—Ç–æ–±—ã –Ω–µ–¥–µ–ª—è –Ω–∞—á–∏–Ω–∞–ª–∞—Å—å —Å –ü–Ω
                let dayOfWeek = today.getDay(); // 0 (–í—Å) - 6 (–°–±)
                if (dayOfWeek === 0) dayOfWeek = 7; // –°—á–∏—Ç–∞–µ–º –í—Å –ø–æ—Å–ª–µ–¥–Ω–∏–º –¥–Ω–µ–º –Ω–µ–¥–µ–ª–∏
                const diff = dayOfWeek - 1; // –í—ã—á–∏—Å–ª—è–µ–º —Ä–∞–∑–Ω–∏—Ü—É –¥–ª—è –ü–Ω (1)
                
                startDate = new Date(today);
                startDate.setDate(today.getDate() - diff);
            } else { // month
                startDate = new Date(today.getFullYear(), today.getMonth(), 1);
            }
            
            const endDate = new Date(today);
            endDate.setHours(23, 59, 59, 999); // –î–æ –∫–æ–Ω—Ü–∞ –¥–Ω—è
            
            // –§–∏–ª—å—Ç—Ä—É–µ–º –≤—Å–µ –ª–æ–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ [startDate, endDate]
            const filtered = window.dailyLogs.filter(log => {
                const logDate = new Date(log.date);
                return logDate >= startDate && logDate <= endDate;
            });

            // –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ –¥–∞—Ç –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞
            const dates = [];
            let cursor = new Date(startDate);
            while (cursor <= endDate) {
                dates.push(cursor.toISOString().split('T')[0]);
                cursor.setDate(cursor.getDate() + 1);
            }
            
            // –°–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ —Å –∫–∞–∂–¥–æ–π –¥–∞—Ç–æ–π, –≤—Å—Ç–∞–≤–ª—è—è null –¥–ª—è –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –¥–Ω–µ–π
            const dataMap = new Map(filtered.map(log => [log.date, log]));
            const periodData = dates.map(date => dataMap.get(date));
            
            // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –º–µ—Ç–∫–∏ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞
            const labels = dates.map(dateString => {
                const date = new Date(dateString);
                return period === 'week' ? date.toLocaleDateString('ru-RU', { weekday: 'short' }) : date.toLocaleDateString('ru-RU', { day: 'numeric', month: 'numeric' });
            });
            
            return { labels, periodData };
        }

        function createGradient(ctx, chartArea, colorStops) {
            const gradient = ctx.createLinearGradient(0, chartArea.bottom, 0, chartArea.top);
            colorStops.forEach(stop => gradient.addColorStop(stop.offset, stop.color));
            return gradient;
        }

        function createMoodGradient(ctx, chartArea, data) {
            const colors = data.map(log => log ? getMoodColor(log.mood) : 'rgba(0,0,0,0)');
            const colorStops = [];
            const step = 1 / (colors.length - 1 || 1);
            
            for (let i = 0; i < colors.length; i++) {
                if (colors[i] !== 'rgba(0,0,0,0)') {
                    // –ò—Å–ø–æ–ª—å–∑—É–µ–º —É—Å—Ä–µ–¥–Ω–µ–Ω–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞
                    const offset = i * step;
                    colorStops.push({ offset: Math.max(0, offset - step / 2), color: colors[i] });
                    colorStops.push({ offset: Math.min(1, offset + step / 2), color: colors[i] });
                }
            }
            // –≠—Ç–æ –æ–±—Ö–æ–¥–Ω–æ–π –ø—É—Ç—å, —Ç–∞–∫ –∫–∞–∫ Chart.js –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã –≤–¥–æ–ª—å –æ—Å–∏ X –ª–µ–≥–∫–æ.
            // –í–º–µ—Å—Ç–æ –∏—Å—Ç–∏–Ω–Ω–æ–≥–æ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ –≤–¥–æ–ª—å –ª–∏–Ω–∏–∏, –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–ª–∏–≤–∫—É –æ–±–ª–∞—Å—Ç–∏, 
            // –∞ —Ü–≤–µ—Ç –ª–∏–Ω–∏–∏ –±—É–¥–µ—Ç —Å—Ä–µ–¥–Ω–∏–º –∏–ª–∏ —Å–∞–º—ã–º –ø–æ—Å–ª–µ–¥–Ω–∏–º. 
            // –î–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–¥–∏–Ω —Ü–≤–µ—Ç –¥–ª—è –ª–∏–Ω–∏–∏, –Ω–æ –º–µ–Ω—è–µ–º —Ü–≤–µ—Ç —Ç–æ—á–∫–∏.
            return MOOD_COLORS[3].border; // –°—Ä–µ–¥–Ω–∏–π —Ü–≤–µ—Ç –¥–ª—è –ª–∏–Ω–∏–∏
        }

        function createStressGradient(ctx, chartArea) {
            // –ó–µ–ª–µ–Ω—ã–π (–Ω–∏–∑–∫–∏–π) –∫ –ö—Ä–∞—Å–Ω–æ–º—É (–≤—ã—Å–æ–∫–∏–π)
            return createGradient(ctx, chartArea, [
                { offset: 0.0, color: MOOD_COLORS[4].bg }, // Low (Green)
                { offset: 0.5, color: MOOD_COLORS[3].bg }, // Mid (Yellow)
                { offset: 1.0, color: MOOD_COLORS[1].bg } // High (Red)
            ]);
        }

        function renderCharts(period) {
            const { labels, periodData } = filterLogsByPeriod(period);
            const moodData = periodData.map(log => log ? log.mood : null);
            const stressData = periodData.map(log => log ? log.stress : null);

            // 1. –ì—Ä–∞—Ñ–∏–∫ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏—è (1-5)
            if (moodChartInstance) moodChartInstance.destroy();
            const moodCtx = document.getElementById('moodChart').getContext('2d');
            moodChartInstance = new Chart(moodCtx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ',
                        data: moodData,
                        borderColor: MOOD_COLORS[3].border, // –¶–≤–µ—Ç –ª–∏–Ω–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                        backgroundColor: (context) => {
                            const chart = context.chart;
                            if (chart.chartArea) {
                                return createMoodGradient(context.chart.ctx, chart.chartArea, periodData);
                            }
                            return MOOD_COLORS[3].border;
                        },
                        tension: 0.4, // –ü–ª–∞–≤–Ω–∞—è –ª–∏–Ω–∏—è
                        pointBackgroundColor: periodData.map(log => log ? getMoodColor(log.mood) : MOOD_COLORS[3].border),
                        pointRadius: 6,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            min: 1,
                            max: 5,
                            ticks: { stepSize: 1 },
                            title: { display: true, text: '–û—Ü–µ–Ω–∫–∞' }
                        },
                        x: { grid: { display: false } }
                    },
                    plugins: { legend: { display: false } }
                }
            });
            
            // 2. –ì—Ä–∞—Ñ–∏–∫ –°—Ç—Ä–µ—Å—Å–∞ (1-10)
            if (stressChartInstance) stressChartInstance.destroy();
            const stressCtx = document.getElementById('stressChart').getContext('2d');
            stressChartInstance = new Chart(stressCtx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '–°—Ç—Ä–µ—Å—Å',
                        data: stressData,
                        tension: 0.4, // –ü–ª–∞–≤–Ω–∞—è –ª–∏–Ω–∏—è
                        pointBackgroundColor: periodData.map(log => log ? getStressColor(log.stress) : MOOD_COLORS[3].border),
                        pointRadius: 6,
                        fill: 'start', // –ó–∞–ª–∏–≤–∫–∞ –ø–æ–¥ –ª–∏–Ω–∏–µ–π
                        borderColor: MOOD_COLORS[1].border, // –ö—Ä–∞—Å–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞
                        backgroundColor: (context) => {
                            const chart = context.chart;
                            if (chart.chartArea) {
                                return createStressGradient(context.chart.ctx, chart.chartArea);
                            }
                            return MOOD_COLORS[1].bg;
                        },
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            min: 1,
                            max: 10,
                            ticks: { stepSize: 1 },
                            title: { display: true, text: '–£—Ä–æ–≤–µ–Ω—å' }
                        },
                        x: { grid: { display: false } }
                    },
                    plugins: { legend: { display: false } }
                }
            });
        }
        
        function updateCharts() {
            renderCharts(currentChartPeriod);
        }

        // --- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ DOM ---

        document.addEventListener('DOMContentLoaded', () => {
            setupInputListeners();
            
            // –ù–∞–≤–∏–≥–∞—Ü–∏—è
            document.getElementById('nav-tabs').addEventListener('click', (e) => {
                if (e.target.dataset.view) {
                    switchView(e.target.dataset.view);
                }
            });

            // –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –ø–µ—Ä–∏–æ–¥–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤
            document.querySelectorAll('.chart-period-button').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    document.querySelectorAll('.chart-period-button').forEach(b => {
                        b.classList.remove('active');
                        b.style.backgroundColor = 'transparent';
                    });
                    e.target.classList.add('active');
                    e.target.style.backgroundColor = 'var(--p-accent)';

                    currentChartPeriod = e.target.dataset.period;
                    updateCharts();
                });
            });

            // –í—ã–±–∏—Ä–∞–µ–º –≤–∫–ª–∞–¥–∫—É "–ù–µ–¥–µ–ª—è" –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            document.querySelector('.chart-period-button[data-period="week"]').click();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
            renderCalendar();
            
            // –í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ Firebase –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–æ DOM –≥–æ—Ç–æ–≤, 
            // –º—ã –º–æ–∂–µ–º –≤—ã–∑–≤–∞—Ç—å updateUI –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ window.dailyLogs –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω 
            // (—ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ setupDataListener).
        });

    </script>
</body>
</html>

